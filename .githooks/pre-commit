#!/bin/sh
# Pre-commit hook: lint, fmt, test ã‚’å®Ÿè¡Œã—ã¦NGæ™‚ã«ãƒ–ãƒ­ãƒƒã‚¯

set -e

echo "ğŸ” Pre-commit checks running..."

# Format check
echo "ğŸ“ Checking formatting..."
if ! deno fmt --check; then
  echo "âŒ Formatting check failed!"
  echo "ğŸ’¡ Run 'deno task fmt' to fix formatting issues."
  exit 1
fi

# Lint
echo "ğŸ§¹ Running linter..."
if ! deno task lint; then
  echo "âŒ Lint check failed!"
  echo "ğŸ’¡ Fix linting issues before committing."
  exit 1
fi

# Unit tests
echo "ğŸ§ª Running unit tests..."
if ! deno task test; then
  echo "âŒ Unit tests failed!"
  echo "ğŸ’¡ Fix failing tests before committing."
  exit 1
fi

echo "âœ… Pre-commit checks passed!"
exit 0
